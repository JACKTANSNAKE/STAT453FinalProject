<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter2 Data Exploration | Rotterdam</title>
  <meta name="description" content="Chapter2 Data Exploration | Rotterdam" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter2 Data Exploration | Rotterdam" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter2 Data Exploration | Rotterdam" />
  
  
  

<meta name="author" content="JACK TAN, YIMING MIAO" />


<meta name="date" content="2021-03-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="survival.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Motivation</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#some-background-information"><i class="fa fa-check"></i><b>1.1</b> Some Background Information</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-exploration.html"><a href="data-exploration.html"><i class="fa fa-check"></i><b>2</b> Data Exploration</a><ul>
<li class="chapter" data-level="2.1" data-path="data-exploration.html"><a href="data-exploration.html#loading-data"><i class="fa fa-check"></i><b>2.1</b> Loading Data</a></li>
<li class="chapter" data-level="2.2" data-path="data-exploration.html"><a href="data-exploration.html#data-wrangling"><i class="fa fa-check"></i><b>2.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="2.3" data-path="data-exploration.html"><a href="data-exploration.html#data-visualizations"><i class="fa fa-check"></i><b>2.3</b> Data visualizations</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-exploration.html"><a href="data-exploration.html#diagnositcs-vs.-survival-times"><i class="fa fa-check"></i><b>2.3.1</b> Diagnositcs vs. Survival Times</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-exploration.html"><a href="data-exploration.html#treatment-vs.-survival-times"><i class="fa fa-check"></i><b>2.3.2</b> Treatment vs. Survival Times</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="survival.html"><a href="survival.html"><i class="fa fa-check"></i><b>3</b> Survival</a><ul>
<li class="chapter" data-level="3.1" data-path="survival.html"><a href="survival.html#loading-data-1"><i class="fa fa-check"></i><b>3.1</b> Loading Data</a></li>
<li class="chapter" data-level="3.2" data-path="survival.html"><a href="survival.html#kaplan-miere"><i class="fa fa-check"></i><b>3.2</b> Kaplan-Miere</a><ul>
<li class="chapter" data-level="3.2.1" data-path="survival.html"><a href="survival.html#size-vs.-survival-times"><i class="fa fa-check"></i><b>3.2.1</b> <code>size</code> vs. Survival Times</a></li>
<li class="chapter" data-level="3.2.2" data-path="survival.html"><a href="survival.html#nodes_level-vs.-survival-times"><i class="fa fa-check"></i><b>3.2.2</b> <code>Nodes_level</code> vs. Survival Times</a></li>
<li class="chapter" data-level="3.2.3" data-path="survival.html"><a href="survival.html#treatment-vs.-survival-times-1"><i class="fa fa-check"></i><b>3.2.3</b> <code>Treatment</code> vs. Survival Times</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="survival.html"><a href="survival.html#parametric-models"><i class="fa fa-check"></i><b>3.3</b> Parametric Models</a></li>
<li class="chapter" data-level="3.4" data-path="survival.html"><a href="survival.html#cox-ph"><i class="fa fa-check"></i><b>3.4</b> Cox-PH</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>4</b> Reference</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rotterdam</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-exploration" class="section level1">
<h1><span class="header-section-number">Chapter2</span> Data Exploration</h1>
<div id="loading-data" class="section level2">
<h2><span class="header-section-number">2.1</span> Loading Data</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">data</span>(rotterdam)</a></code></pre></div>
<p>The data that we are going to use is called <code>rotterdam</code>, and it is a dataset that’s pre-recorded in the survival package. According to the documentation of the package, the data are retrieved from the Rotterdam tumor bank, which include various anonymous information about patients with breast cancer. Below is a table of the variables in the dataset:</p>
<table>
<thead>
<tr class="header">
<th>Variable name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>pid</code></td>
<td>patient identifier</td>
</tr>
<tr class="even">
<td><code>year</code></td>
<td>year of cancer incidence</td>
</tr>
<tr class="odd">
<td><code>age</code></td>
<td>age</td>
</tr>
<tr class="even">
<td><code>meno</code></td>
<td>menopausal status (0= premenopausal, 1= postmenopausal)</td>
</tr>
<tr class="odd">
<td><code>size</code></td>
<td>tumor size, a factor with levels <code>&lt;=20</code>, <code>20-50</code>, <code>&gt;50</code></td>
</tr>
<tr class="even">
<td><code>grade</code></td>
<td>tumor grade</td>
</tr>
<tr class="odd">
<td><code>nodes</code></td>
<td>number of positive lymph nodes</td>
</tr>
<tr class="even">
<td><code>pgr</code></td>
<td>progesterone receptors (fmol/l)</td>
</tr>
<tr class="odd">
<td><code>er</code></td>
<td>estrogen receptors (fmol/l)</td>
</tr>
<tr class="even">
<td><code>hormon</code></td>
<td>hormonal treatment (0=no, 1=yes)</td>
</tr>
<tr class="odd">
<td><code>chemo</code></td>
<td>chemotherapy</td>
</tr>
<tr class="even">
<td><code>rtime</code></td>
<td>days to recurrence or last follow-up</td>
</tr>
<tr class="odd">
<td><code>recur</code></td>
<td>0= no recurrence, 1= recurrence</td>
</tr>
<tr class="even">
<td><code>dtime</code></td>
<td>days to death or last follow-up</td>
</tr>
<tr class="odd">
<td><code>death</code></td>
<td>0= alive, 1= dead</td>
</tr>
</tbody>
</table>
<p>From the description above, we see that there are <code>size</code> which stands for the size of the tumor, <code>nodes</code> which stands for how many lymph nodes are test cancer positive, so we have 2 criterions out of the three suggested in the background info.</p>
</div>
<div id="data-wrangling" class="section level2">
<h2><span class="header-section-number">2.2</span> Data Wrangling</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(size) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   size  number
##   &lt;fct&gt;  &lt;int&gt;
## 1 &lt;=20    1387
## 2 20-50   1291
## 3 &gt;50      304</code></pre>
<p>For lymph nodes, the usual way of classifying the severity would be:<code>N0</code> for no positive nodes; <code>N1</code> for 1-3 positive nodes; <code>N2</code> for 4-9 positive nodes; and <code>N3</code> for more than 10 nodes. We will follow this classification and make a new factor called <code>Nodes_level</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Nodes_level =</span> <span class="kw">ifelse</span>(nodes <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;N0&quot;</span>, </a>
<a class="sourceLine" id="cb4-3" title="3">                              <span class="kw">ifelse</span>(nodes <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>nodes <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>, <span class="st">&quot;N1&quot;</span>, </a>
<a class="sourceLine" id="cb4-4" title="4">                                     <span class="kw">ifelse</span>(nodes <span class="op">&gt;=</span><span class="st"> </span><span class="dv">4</span> <span class="op">&amp;</span><span class="st"> </span>nodes <span class="op">&lt;=</span><span class="st"> </span><span class="dv">9</span>, <span class="st">&quot;N2&quot;</span>, </a>
<a class="sourceLine" id="cb4-5" title="5">                                            <span class="kw">ifelse</span>(nodes <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;N3&quot;</span>, <span class="ot">NaN</span>)))))</a>
<a class="sourceLine" id="cb4-6" title="6">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span><span class="kw">group_by</span>(Nodes_level) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   Nodes_level number
##   &lt;chr&gt;        &lt;int&gt;
## 1 N0            1436
## 2 N1             764
## 3 N2             515
## 4 N3             267</code></pre>
<p>Since the <code>grade</code> variable in our dataset is a numeric variable whereas we actually want to treat it as a factor, we do the following:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">grade =</span> <span class="kw">as.factor</span>(grade))</a></code></pre></div>
<p>As we were examining through the data, we found that upon the <code>chemo</code> variable and the <code>hormon</code> variable, there are instances where patients gets both therapy or neither. So in order to explore the relationship between treatment and survival, we introduce a new variable called <code>Treatment</code>, using the <code>chemo</code> and <code>hormon</code> variables.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Treatment =</span> <span class="kw">ifelse</span>(chemo <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hormon <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;Chemo&quot;</span>, <span class="kw">ifelse</span>(chemo <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>hormon <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Hormon&quot;</span>, <span class="kw">ifelse</span>(chemo <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hormon <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Both&quot;</span>, <span class="st">&quot;NaN/Other Treatment&quot;</span>))))</a></code></pre></div>
</div>
<div id="data-visualizations" class="section level2">
<h2><span class="header-section-number">2.3</span> Data visualizations</h2>
<div id="diagnositcs-vs.-survival-times" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Diagnositcs vs. Survival Times</h3>
<p><code>size</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> size, <span class="dt">y =</span> dtime, <span class="dt">fill =</span> size)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><code>size</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> size, <span class="dt">y =</span> rtime, <span class="dt">fill =</span> size)) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p><code>Nodes_level</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Nodes_level, <span class="dt">y =</span> dtime, <span class="dt">fill =</span> Nodes_level)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p><code>Nodes_level</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Nodes_level, <span class="dt">y =</span> rtime, <span class="dt">fill =</span> Nodes_level)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="treatment-vs.-survival-times" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Treatment vs. Survival Times</h3>
<p><code>Treatment</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">y =</span> dtime, <span class="dt">fill =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p><code>Treatment</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">y =</span> rtime, <span class="dt">fill =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>A very important criterion in analysis about cancer is the 5-year survival rate. In order to examine that, we introduce a new variable called <code>5_year_survival</code>, which indicates 1 if a patients survival time is larger than 5 years and 0 vice versa.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dtime_Years =</span> <span class="kw">floor</span>(dtime<span class="op">/</span><span class="dv">365</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">5_year_survival</span><span class="st">`</span> =<span class="st"> </span><span class="kw">ifelse</span>(dtime_Years <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>))</a></code></pre></div>
<p>Now we want to calculate the 5-year survival rate for the population in the dataset.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">5_year_survival</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   `5_year_survival` number
##               &lt;dbl&gt;  &lt;int&gt;
## 1                 0    898
## 2                 1   2084</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="dv">2084</span><span class="op">/</span>(<span class="dv">898</span><span class="op">+</span><span class="dv">2084</span>)</a></code></pre></div>
<pre><code>## [1] 0.6988598</code></pre>
<p>And also the important 10-year survival rate.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dtime_Years =</span> <span class="kw">floor</span>(dtime<span class="op">/</span><span class="dv">365</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">10_year_survival</span><span class="st">`</span> =<span class="st"> </span><span class="kw">ifelse</span>(dtime_Years <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">0</span>))</a></code></pre></div>
<p>Now we calculate the 10-year survival rate for the population in the dataset.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">10_year_survival</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   `10_year_survival` number
##                &lt;dbl&gt;  &lt;int&gt;
## 1                  0   2297
## 2                  1    685</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="dv">685</span><span class="op">/</span>(<span class="dv">685</span> <span class="op">+</span><span class="st"> </span><span class="dv">2297</span>)</a></code></pre></div>
<pre><code>## [1] 0.2297116</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="survival.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Rotterdam.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
